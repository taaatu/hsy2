import{a as c,r as u,M as i,U as d}from"./index-d81204ee.js";import{u as y,C as o}from"./DoFetch-16798144.js";const E=()=>{const{doFetch:s}=y(),n=c(),{curentUser:t,setCurrentUser:a}=u.useContext(i);return{getUserList:async()=>{try{const r=await s("user","GET");return console.log("get user list",r),r}catch(r){console.error("get user list",r)}},getUserById:async r=>{try{return await s("user/userid/"+r,"GET")}catch(e){console.error("get user by id",e)}},addUser:async r=>{try{const e=await s("user","POST",r);return console.log("add user: ",e),e}catch(e){return console.error("add user: ",e.message),new o(e.message,e.status)}},modifyUser:async r=>{try{const e=await s("user/update","PUT",r);return console.log("modify user res: ",e),e}catch(e){return console.error("modify user",e),new o(e.message,e.status)}},modifyUserByAdmin:async r=>{try{const e=await s(`user/adminupdate/${r.user_id}`,"PUT",r);console.log("modify user res: ",e)}catch(e){return console.error("modify user by admin: ",e.message),new o(e.message,e.status)}},deleteUser:async r=>{try{if(!confirm("Haluatko varmasti poistaa käyttäjän?"))return;const e=await s("user/userid/"+r,"DELETE");console.log("delete user: ",e),alert("Käyttäjä poistettu"),(t==null?void 0:t.user_group)===d.ADMIN?n("/admin/managers"):n("/")}catch(e){alert("Käyttäjän poistaminen epäonnistui"),console.error("delete user",e)}},getUserByToken:async()=>{try{const r=await s("user/token","GET");return r&&a(r),r}catch(r){console.error("get user by token",r)}}}};export{E as u};
