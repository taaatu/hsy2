import{r as j,j as e}from"./index-0ba10711.js";import{c as f,d as n,C as E}from"./DoFetch-1e0aed69.js";import{u as S}from"./BuildingHook-2bfcbf9d.js";import{u as y,F as o}from"./FormFieldError-a48cf72f.js";import{S as g}from"./SuccessAlertModal-1e365ebf.js";import"./iconBase-915c90f0.js";import"./ThemeProvider-e9b9720e.js";import"./Fade-9eb966e8.js";import"./divWithClassName-71a5ae86.js";import"./index.esm-8b17bf66.js";const _=()=>{var i,a;const{addBuilding:m}=S(),[u,c]=j.useState(!1),{register:s,handleSubmit:d,setError:p,formState:{errors:r}}=y({defaultValues:{city:n[0]}}),h=async t=>{const l=await m(t);if(l instanceof E){const x=l.status===409?"Taloyhtiö tällä osoitteella tai nimellä on jo olemassa":"Palvelinvirhe";p("root.serverError",{message:x});return}c(!0)};return e.jsxs("main",{className:"centered-container",children:[e.jsx(g,{show:u,message:"Taloyhtiö lisätty onnistuneesti",navRoute:"/manager/properties"}),e.jsxs("form",{className:"color3 column",style:{width:"50%",minWidth:"350px"},onSubmit:d(h),children:[e.jsx("h4",{children:"Lisää taloyhtiö"}),e.jsxs("label",{children:["Taloyhtiön nimi",e.jsx("input",{className:"line",...s("name",{required:"Nimi vaaditaan"}),placeholder:"Taloyhtiön nimi"}),e.jsx(o,{error:r.name})]}),e.jsxs("label",{children:["Osoite",e.jsx("input",{className:"line",placeholder:"Osoite",...s("street",{required:"Osoite vaaditaan"})}),e.jsx(o,{error:r.street})]}),e.jsxs("label",{children:["Postinumero",e.jsx("input",{className:"line",placeholder:"Postinumero",...s("post_code",{required:"Postinumero vaaditaan",pattern:{value:f,message:"Postinumeron tulee olla 5 numeroa"}})}),e.jsx(o,{error:r.post_code})]}),e.jsxs("label",{children:["Kaupunki",e.jsx("select",{...s("city",{required:!0}),children:n.map(t=>e.jsx("option",{children:t},t))})]}),((i=r.root)==null?void 0:i.serverError)&&e.jsx(o,{error:(a=r.root)==null?void 0:a.serverError}),e.jsx("button",{style:{margin:"auto"},children:"Lisää taloyhtiö"})]})]})};export{_ as default};
