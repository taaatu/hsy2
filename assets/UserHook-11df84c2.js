import{u as a,C as t}from"./DoFetch-1e0aed69.js";import{a as c,r as u,M as i}from"./index-0ba10711.js";const h=()=>{const{doFetch:s}=a(),o=c(),{setCurrentUser:n}=u.useContext(i);return{getUserList:async()=>{try{const r=await s("user","GET");return console.log("get user list",r),r}catch(r){console.error("get user list",r)}},getUserById:async r=>{try{return await s("user/userid/"+r,"GET")}catch(e){console.error("get user by id",e)}},addUser:async r=>{try{const e=await s("user","POST",r);return console.log("add user: ",e),e}catch(e){return console.error("add user: ",e.message),new t(e.message,e.status)}},modifyUser:async r=>{try{const e=await s("user/update","PUT",r);return console.log("modify user res: ",e),e}catch(e){return console.error("modify user",e),new t(e.message,e.status)}},modifyUserByAdmin:async r=>{try{const e=await s(`user/adminupdate/${r.user_id}`,"PUT",r);console.log("modify user res: ",e)}catch(e){return console.error("modify user by admin: ",e.message),new t(e.message,e.status)}},deleteUser:async r=>{try{if(!confirm("Haluatko varmasti poistaa käyttäjän?"))return;const e=await s("user/userid/"+r,"DELETE");console.log("delete user: ",e),alert("Käyttäjä poistettu"),o("/")}catch(e){alert("Käyttäjän poistaminen epäonnistui"),console.error("delete user",e)}},getUserByToken:async()=>{try{const r=await s("user/token","GET");return r&&n(r),r}catch(r){console.error("get user by token",r)}}}};export{h as u};
