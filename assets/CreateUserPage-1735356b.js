import{r as x,j as s}from"./index-fdb54680.js";import{P as h,C as S}from"./DoFetch-44b224c4.js";import{u as k}from"./UserHook-96b5e8ec.js";import{B as f}from"./ButtonLoading-5c14b6da.js";import{u as v,F as e}from"./FormFieldError-c2d8c63e.js";import{S as y}from"./SuccessAlertModal-5fd775de.js";import"./ThemeProvider-52d28998.js";import"./iconBase-ee127de4.js";import"./Fade-70f01c49.js";import"./divWithClassName-6209a725.js";import"./index.esm-30964094.js";const M=()=>{var i,t;const{addUser:l}=k(),[m,c]=x.useState(!1),{register:a,handleSubmit:u,setError:p,formState:{errors:r}}=v(),d=async o=>{console.log("data: ",o);const n=await l(o);if(n instanceof S){const j=n.status===409?"Sähköposti on jo käytössä":"Palvelinvirhe";p("root.serverError",{message:j});return}c(!0)};return s.jsxs("main",{className:"centered-container column",children:[s.jsx(y,{show:m,message:"Isännöitsijä lisätty onnistuneesti",navRoute:"/admin/managers"}),s.jsx("h1",{children:"Lisää isännöitsijä"}),s.jsxs("form",{className:"color3 column",onSubmit:u(d),children:[s.jsxs("label",{children:["Isännöitsijän nimi",s.jsx("input",{type:"text",className:"line",...a("full_name",{required:"Nimi vaaditaan"})}),s.jsx(e,{error:r.full_name})]}),s.jsxs("label",{children:["Yrityksen nimi",s.jsx("input",{className:"line",...a("company",{required:"Yrityksen nimi vaaditaan"})}),s.jsx(e,{error:r.company})]}),s.jsxs("label",{children:["Sähköposti",s.jsx("input",{type:"email",className:"line",...a("email",{required:"Sähköposti vaaditaan"})}),s.jsx(e,{error:r.email})]}),s.jsxs("label",{children:["Salasana",s.jsx("input",{className:"line",type:"password",...a("password",{required:"Salasana vaaditaan",pattern:{value:h,message:"Salasanan tulee olla vähintään 8 merkkiä pitkä ja sisältää vähintään yksi numero, yksi erikoismerkki ja yksi iso kirjain"}})}),s.jsx(e,{error:r.password})]}),((i=r.root)==null?void 0:i.serverError)&&s.jsx(e,{error:(t=r.root)==null?void 0:t.serverError}),s.jsx(f,{text:"Lisää isännöitsijä"})]})]})};export{M as default};
