import{r as x,j as s}from"./index-c84ed3dd.js";import{P as h,C as S}from"./DoFetch-8c964e2e.js";import{u as k}from"./UserHook-e4fe87e5.js";import{B as y}from"./ButtonLoading-64b4dce1.js";import{u as f,F as e}from"./FormFieldError-6fa1ba42.js";import{S as v}from"./SuccessAlertModal-ddfe2b7d.js";import"./ThemeProvider-daf8709f.js";import"./iconBase-10fe07e4.js";import"./Fade-25b713ee.js";import"./divWithClassName-b536dd03.js";import"./index.esm-954b3aab.js";const M=()=>{var i,t;const{addUser:l}=k(),[m,c]=x.useState(!1),{register:a,handleSubmit:u,setError:d,formState:{errors:r}}=f(),p=async o=>{console.log("data: ",o);const n=await l(o);if(n instanceof S){const j=n.status===409?"Sähköposti on jo käytössä":"Palvelinvirhe";d("root.serverError",{message:j});return}c(!0)};return s.jsxs("main",{className:"centered-container column",children:[s.jsx(v,{show:m,message:"Isännöitsijä lisätty onnistuneesti",navRoute:"/admin/managers"}),s.jsxs("form",{className:"color3 column",style:{width:"50%",minWidth:"350px"},onSubmit:u(p),children:[s.jsx("h4",{children:"Lisää isännöitsijä"}),s.jsxs("label",{children:["Isännöitsijän nimi",s.jsx("input",{type:"text",className:"line",...a("full_name",{required:"Nimi vaaditaan"})}),s.jsx(e,{error:r.full_name})]}),s.jsxs("label",{children:["Yrityksen nimi",s.jsx("input",{className:"line",...a("company",{required:"Yrityksen nimi vaaditaan"})}),s.jsx(e,{error:r.company})]}),s.jsxs("label",{children:["Sähköposti",s.jsx("input",{type:"email",className:"line",...a("email",{required:"Sähköposti vaaditaan"})}),s.jsx(e,{error:r.email})]}),s.jsxs("label",{children:["Salasana",s.jsx("input",{className:"line",type:"password",...a("password",{required:"Salasana vaaditaan",pattern:{value:h,message:"Salasanan tulee olla vähintään 8 merkkiä pitkä ja sisältää vähintään yksi numero, yksi erikoismerkki ja yksi iso kirjain"}})}),s.jsx(e,{error:r.password})]}),((i=r.root)==null?void 0:i.serverError)&&s.jsx(e,{error:(t=r.root)==null?void 0:t.serverError}),s.jsx("div",{style:{margin:"auto"},children:s.jsx(y,{text:"Lisää isännöitsijä"})})]})]})};export{M as default};
