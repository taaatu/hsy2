import{r as t,M as v,a as h,U as i,j as e}from"./index-e95d5965.js";import{L as p}from"./LoadingList-52dc23f3.js";import{s as x}from"./Lists.module-d5aca742.js";import{u as j}from"./SurveyHook-1be97117.js";import{S}from"./SearchBar-4c65a054.js";const C=()=>{const{curentUser:r}=t.useContext(v),a=h(),[o,n]=t.useState([]),[l,c]=t.useState(""),u=o.filter(s=>s.survey_title.toLowerCase().includes(l.toLowerCase())),d=(r==null?void 0:r.user_group)===i.ADMIN?"admin":"manager",{getSurveys:m}=j(),y=s=>c(s.target.value);return t.useEffect(()=>{(async()=>{const s=await m();s&&n(s)})()},[]),e.jsxs("div",{className:"column",children:[e.jsx("h1",{children:"Kyselypohjat"}),e.jsx("div",{className:"sticky-header",children:e.jsxs("div",{style:{marginBottom:"1em",gap:"1rem",flexWrap:"wrap"},className:"flex-row center-align",children:[e.jsx(S,{placeholder:"Hae kyselyitÃ¤",handleSearch:y}),(r==null?void 0:r.user_group)===i.ADMIN?e.jsx("button",{onClick:()=>a("/admin/surveys/create"),className:"colored",children:"Luo uusi kysely"}):null]})}),e.jsx(p,{children:u.map(s=>e.jsxs("div",{className:x.listItem,children:[e.jsx("div",{children:s.survey_title}),e.jsx("button",{onClick:()=>a(`/${d}/surveys/${s.survey_id}`),children:"Siirry"})]},s.survey_id))})]})};export{C as S};
