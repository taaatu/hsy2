import{u as h,r as i,a as x,j as e}from"./index-c84ed3dd.js";import{u as f}from"./SurveyHook-b4ebb6c0.js";import{S as g}from"./SurveyPreview-260653d0.js";import{L as S}from"./LoadingList-de1f9d80.js";import"./DoFetch-8c964e2e.js";import"./SuccessAlertModal-ddfe2b7d.js";import"./ThemeProvider-daf8709f.js";import"./Fade-25b713ee.js";import"./divWithClassName-b536dd03.js";import"./index.esm-954b3aab.js";import"./iconBase-10fe07e4.js";import"./AnswerSurveyForm-79298a36.js";import"./ButtonLoading-64b4dce1.js";import"./Button-a235a16b.js";import"./Button-b5cff543.js";const I=()=>{const{surveyid:t}=h(),{getSurveyById:n,deleteSurvey:o,getAssignedSurveys:u}=f(),[r,c]=i.useState(),[d,l]=i.useState([]),a=x(),y=async()=>{t&&confirm("Haluatko varmasti poistaa kyselyn?")&&await o(t)},m=async()=>{if(!t)return;const s=await n(t);c(s)};return i.useEffect(()=>{m(),(async()=>{const v=(await u()).filter(p=>p.survey_id===Number(t));l(v)})()},[]),r?e.jsxs("main",{children:[e.jsx("h1",{children:r.survey_header.survey_title}),e.jsx(g,{survey:r}),e.jsx("button",{className:"delete",onClick:y,children:"Poista kysely"}),e.jsx("button",{className:"colored",onClick:()=>a("/admin/surveys/create/"+r.survey_header.survey_id),children:"Luo kopio"}),e.jsx("h1",{children:"Assigned surveys list"}),e.jsx(S,{children:d.map(s=>e.jsxs("div",{className:"list-item",children:[e.jsx("h4",{style:{flex:1},children:s.survey_title}),e.jsxs("div",{style:{flex:1},children:[s.street,", ",s.post_code,", ",s.city]}),e.jsx("button",{onClick:()=>a(`/manager/surveys/${t}/assigned/${s.assigned_survey_id}`),children:"Siirry"})]},s.assigned_survey_id))})]}):e.jsx("h1",{children:"Ei kyselyÃ¤"})};export{I as default};
