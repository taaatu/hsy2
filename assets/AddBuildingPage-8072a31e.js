import{r as j,j as e}from"./index-fdb54680.js";import{c as f,d as n,C as E}from"./DoFetch-44b224c4.js";import{u as S}from"./BuildingHook-15bc61e1.js";import{u as v,F as t}from"./FormFieldError-c2d8c63e.js";import{S as g}from"./SuccessAlertModal-5fd775de.js";import"./iconBase-ee127de4.js";import"./ThemeProvider-52d28998.js";import"./Fade-70f01c49.js";import"./divWithClassName-6209a725.js";import"./index.esm-30964094.js";const _=()=>{var a,i;const{addBuilding:m}=S(),[u,c]=j.useState(!1),{register:s,handleSubmit:d,setError:p,formState:{errors:r}}=v({defaultValues:{city:n[0]}}),h=async o=>{const l=await m(o);if(l instanceof E){const x=l.status===409?"Taloyhtiö tällä osoitteella tai nimellä on jo olemassa":"Palvelinvirhe";p("root.serverError",{message:x});return}c(!0)};return e.jsxs("main",{className:"centered-container",children:[e.jsx(g,{show:u,message:"Taloyhtiö lisätty onnistuneesti",navRoute:"/manager/properties"}),e.jsxs("form",{className:"color3 column",onSubmit:d(h),children:[e.jsx("h4",{children:"Taloyhtiö"}),e.jsxs("label",{children:["Osoite",e.jsx("input",{className:"line",placeholder:"Osoite",...s("street",{required:"Osoite vaaditaan"})}),e.jsx(t,{error:r.street})]}),e.jsxs("label",{children:["Postinumero",e.jsx("input",{className:"line",placeholder:"Postinumero",...s("post_code",{required:"Postinumero vaaditaan",pattern:{value:f,message:"Postinumeron tulee olla 5 numeroa"}})}),e.jsx(t,{error:r.post_code})]}),e.jsxs("label",{children:["Kaupunki",e.jsx("select",{...s("city",{required:!0}),children:n.map(o=>e.jsx("option",{children:o},o))})]}),e.jsxs("label",{children:["Taloyhtiön nimi",e.jsx("input",{className:"line",...s("name",{required:"Nimi vaaditaan"}),placeholder:"Taloyhtiön nimi"}),e.jsx(t,{error:r.name})]}),((a=r.root)==null?void 0:a.serverError)&&e.jsx(t,{error:(i=r.root)==null?void 0:i.serverError}),e.jsx("button",{children:"Lisää taloyhtiö"})]})]})};export{_ as default};
