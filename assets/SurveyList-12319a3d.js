import{r as t,M as v,a as x,U as i,j as e}from"./index-afedb39a.js";import{L as h}from"./LoadingList-c905a2a1.js";import{s as p}from"./Lists.module-d5aca742.js";import{u as S}from"./SurveyHook-16c57945.js";import{S as f}from"./SearchBar-e13aa9d1.js";const C=()=>{const{curentUser:r}=t.useContext(v),a=x(),[o,n]=t.useState([]),[l,c]=t.useState(""),u=o.filter(s=>s.survey_title.toLowerCase().includes(l.toLowerCase())),d=(r==null?void 0:r.user_group)===i.ADMIN?"admin":"manager",{getSurveys:m}=S(),y=s=>c(s.target.value);return t.useEffect(()=>{(async()=>{const s=await m();s&&n(s)})()},[]),e.jsxs("div",{children:[e.jsx("h1",{children:"Kyselyt"}),e.jsx("div",{className:"sticky-header",children:e.jsxs("div",{style:{marginBottom:"1em",gap:"1rem",flexWrap:"wrap"},className:"flex-row center-align",children:[e.jsx(f,{placeholder:"Hae kyselyitÃ¤",handleSearch:y}),(r==null?void 0:r.user_group)===i.ADMIN?e.jsx("button",{onClick:()=>a("/admin/surveys/create"),className:"colored",children:"Luo uusi kysely"}):null]})}),e.jsx(h,{children:u.map(s=>e.jsxs("div",{className:p.listItem,children:[e.jsx("div",{children:s.survey_title}),e.jsx("button",{onClick:()=>a(`/${d}/surveys/${s.survey_id}`),children:"Siirry"})]},s.survey_id))})]})};export{C as S};
